<!DOCTYPE html>
<html>

<head>
  <title>MyChart Extension</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
  <script src="jspdf.umd.min.js"></script>
  <script src="popup.js" defer></script>
  <script>
    function dynamicSize() {
      var responseContainer = document.getElementById('chatGPTResponse');
      var extensionBody = document.getElementById('extensionBody');
      var responseHeight = responseContainer.clientHeight;
      extensionBody.style.height = (responseHeight + 40) + 'px';
      
      //width adjustment (can keep or not)
      //var responseWidth = responseContainer.clientWidth;
      //extensionBody.style.width = (responseWidth + 40) + 'px';
      window.onload = dynamicSize;
    }
  </script>
</head>

<body>
  <h1>MyChart Simplify</h1>

  <img src="myChartIcon.png" alt="myChartIcon" id="icon" />

  <textarea id="highlightedText" style="width: 600px; max-width: 600px; min-width: 600px; height: 100px;" placeholder="Highlighted text is pasted here automatically..." type="text">
      </textarea>

      
  <div style="display: flex; align-items: center; gap: 10px;">
    <input id="sentenceSubmit" class="styled-button" type="submit" value="Summarize">
    <select id="languageChooser" class="styled-translate">
      <option value="English" selected="selected">English</option>
      <option value="French">Français</option>
      <option value="Chinese">中文</option>
      <option value="Spanish">Español</option>
      <option value="German">Deutsch</option>
      <option value="Russian">Русский</option>
      <option value="Japanese">日本語</option>
      <option value="Portuguese">Português</option>
      <option value="Italian">Italiano</option>
      <option value="Arabic">العربية</option>
      <option value="Hindi">हिन्दी</option>
      <option value="Korean">한국어</option>
      <option value="Turkish">Türkçe</option>
      <option value="Dutch">Nederlands</option>
      <option value="Swedish">Svenska</option>

      <!-- add more languages as needed -->
    </select>

      <button id="extractButton" class="pdfButton">Extract to PDF</button>
      <button id="feedbackButton" class="feedbackButton">Feedback</button>
      <button id="reopenButton" class="reopenButton">Help</button>

  </div>
  <!-- Backend displays text here -->
  <div id="loadingIcon" style="display: none; justify-content: center; align-items: center;">
    <img src="loading.gif" alt="Loading..." />
  </div>
  <div id="chatGPTResponse"></div>
  <div id="disclaimer" style="display: none;">
    <p><b>Disclaimer:</b> This is a summary of your highlighted notes. Please contact your doctor for medical help.</p>
  </div>
  <!-- Feedback Modal -->
  <div id="feedbackModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Feedback</h2>
      <textarea id="feedbackText" style="width: 300px; max-width: 300px; min-width: 300px; height: 100px;" placeholder="Type your feedback here..."></textarea>
      <div>
        <button id="thumbsUpButton" class="thumbs-up">&#128077;</button>
        <button id="thumbsDownButton" class="thumbs-down">&#128078;</button>
      </div>
    </div>
  </div>
</body>

<div id="instructionBox" class="instruction-box">
  <p><b><i> &#128075 Hi, welcome!</i></b></p>
  <p><b>To use this extension:</b></p>
  <p>1. Highlight whatever medical text you would like to simplify.
    (You can choose to click the black highlight icon to see what you've highlighted, but this is optional!)
  </p>
  <p>2. Click on this extension to see the original text</p>
  <p>3. Click on the 'Summarize' button to see your simplification below!</p>
  <p>It's as easy as that &#128513</p>
  <button id="closeButton">Close</button>
</div>

</html>